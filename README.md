# Yandex Market API Client

Python –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API –Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º.

## üì¶ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîÑ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤** –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º —á–µ—Ä–µ–∑ API –Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç–∞
- ‚è±Ô∏è **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ** –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤
- üíæ **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** –æ—Ç—á–µ—Ç–æ–≤ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞–ø–∫–∏
- üìä **–ê–≤—Ç–æ—Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞** ZIP-–∞—Ä—Ö–∏–≤–æ–≤ —Å –æ—Ç—á–µ—Ç–∞–º–∏
- üõ°Ô∏è **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository-url>
cd oop_learning

2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
python -m venv oop
oop\Scripts\activate
pip install -r requirements.txt

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
python -m venv oop
oop\Scripts\activate
pip install -r requirements.txt

4. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env
YANDEX_API_KEY=your_api_key_here
YANDEX_BUSINESS_ID=your_business_id
YANDEX_CAMPAIGN_ID=your_campaign_id

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
from src.api.base_client import YandexMarketApi

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
api = YandexMarketApi(
    timeout=300,           # —Ç–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    wait_between=30,       # –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
    data_directory='data'  # –ø–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
)

# –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç—á–µ—Ç–∞
response = api.generate_sales_report('2025-10-10', '2025-10-10')
if response:
    report_id = response['result']['reportId']
    file_url = api.wait_for_generation(report_id)
    
    if file_url:
        success = api.get_report(file_url, 'sales')
        if success:
            print("‚úÖ –û—Ç—á–µ—Ç —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω –∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω!")

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
data/
‚îú‚îÄ‚îÄ raw/                   # –ò—Å—Ö–æ–¥–Ω—ã–µ –∞—Ä—Ö–∏–≤—ã
‚îÇ   ‚îî‚îÄ‚îÄ sales/
‚îÇ       ‚îî‚îÄ‚îÄ sales_20251010_143022.zip
‚îî‚îÄ‚îÄ processed/            # –†–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    ‚îî‚îÄ‚îÄ sales/
        ‚îî‚îÄ‚îÄ current/
            ‚îú‚îÄ‚îÄ report.csv
            ‚îî‚îÄ‚îÄ other_files.csv

## API –ú–µ—Ç–æ–¥—ã
generate_sales_report(dateFrom, dateTo, format='CSV', grouping='OFFERS')
–ó–∞–ø—É—Å–∫–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –æ—Ç—á–µ—Ç–∞ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

dateFrom (str): –ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ –ø–µ—Ä–∏–æ–¥–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD

dateTo (str): –ö–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ –ø–µ—Ä–∏–æ–¥–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD

format (str): –§–æ—Ä–º–∞—Ç –æ—Ç—á–µ—Ç–∞ (CSV, XLSX) - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é CSV

grouping (str): –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é OFFERS

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: dict —Å –¥–∞–Ω–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞ API –∏–ª–∏ None –ø—Ä–∏ –æ—à–∏–±–∫–µ

wait_for_generation(report_id)
–û–∂–∏–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

report_id (str): ID –æ—Ç—á–µ—Ç–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: str URL –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞ –∏–ª–∏ None –ø—Ä–∏ –æ—à–∏–±–∫–µ/—Ç–∞–π–º–∞—É—Ç–µ

get_report(file_url, report_type)
–°–∫–∞—á–∏–≤–∞–µ—Ç –∏ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –æ—Ç—á–µ—Ç.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

file_url (str): URL –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞

report_type (str): –¢–∏–ø –æ—Ç—á–µ—Ç–∞ (sales, stocks, etc.)

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: bool - —É—Å–ø–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–∏

–ù–∞—Å—Ç—Ä–æ–π–∫–∏
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:
timeout (int): –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 300)

wait_between (int): –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ —Å—Ç–∞—Ç—É—Å–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 30)

data_directory (str): –ö–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 'data')

üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
Python 3.8+

requests

python-dotenv
